---
title: "WebSocket Streaming"
description: "Stream text-to-speech in real-time with WebSocket connections"
icon: "bolt"
---

import Prerequisites from '/snippets/prerequisites.mdx';
import { AudioTranscript } from '/snippets/audio-transcript.jsx';

{/* speak-mintlify-hash: e1fba201bbf1e887ba6b4783a3435cbdf78ebf9094f5ba29ac495725f19f09c7 */}
<AudioTranscript voices={[
    {
      "id": "8ef4a238714b45718ce04243307c57a7",
      "name": "E-girl",
      "url": "https://pub-b995142090474379a930b856ab79b4d4.r2.dev/audio/feat/transcribe/python-websocket/8ef4a238714b45718ce04243307c57a7.mp3"
    },
    {
      "id": "802e3bc2b27e49c2995d23ef70e6ac89",
      "name": "Energetic Male",
      "url": "https://pub-b995142090474379a930b856ab79b4d4.r2.dev/audio/feat/transcribe/python-websocket/802e3bc2b27e49c2995d23ef70e6ac89.mp3"
    }
  ]} />

## Prerequisites

<Prerequisites />

## Overview

Use [`stream_websocket()`](/api-reference/sdk/python/resources#stream_websocket) for real-time text streaming with LLMs and live captions. The connection automatically buffers incoming text and generates audio as it becomes available.

## Basic Usage

Stream text chunks and receive audio in real-time:

<CodeGroup>
```python Synchronous focus={5-17}
from fishaudio import FishAudio
from fishaudio.utils import play

client = FishAudio()

# Define text generator
def text_chunks():
    yield "Hello, "
    yield "this is "
    yield "real-time "
    yield "streaming!"

# Stream audio via WebSocket
audio_stream = client.tts.stream_websocket(
    text_chunks(),
    latency="balanced"  # Use "balanced" for real-time, "normal" for quality
)

# Play streamed audio
play(audio_stream)
```

```python Asynchronous focus={8-20}
import asyncio
from fishaudio import AsyncFishAudio
from fishaudio.utils import play

async def main():
    client = AsyncFishAudio()

    # Define async text generator
    async def text_chunks():
        yield "Hello, "
        yield "this is "
        yield "real-time "
        yield "streaming!"

    # Stream audio via WebSocket
    audio_stream = await client.tts.stream_websocket(
        text_chunks(),
        latency="balanced"  # Use "balanced" for real-time, "normal" for quality
    )

    # Play streamed audio
    play(audio_stream)

asyncio.run(main())
```
</CodeGroup>

<Note>
For details on audio formats, voice selection, and advanced configuration options like `TTSConfig`, see the [Text-to-Speech guide](/developer-guide/sdk-guide/python/text-to-speech).
</Note>

## Using FlushEvent

Force immediate audio generation to create pauses using [`FlushEvent`](/api-reference/sdk/python/types#flushevent-objects):

<CodeGroup>
```python Synchronous focus={6-12}
from fishaudio import FishAudio
from fishaudio.types import FlushEvent

client = FishAudio()

def text_with_flush():
    yield "First sentence. "
    yield "Second sentence. "
    yield FlushEvent()  # Forces generation NOW
    yield "Third sentence."

audio_stream = client.tts.stream_websocket(text_with_flush())
```

```python Asynchronous focus={8-14}
import asyncio
from fishaudio import AsyncFishAudio
from fishaudio.types import FlushEvent

async def main():
    client = AsyncFishAudio()

    async def text_with_flush():
        yield "First sentence. "
        yield "Second sentence. "
        yield FlushEvent()  # Forces generation NOW
        yield "Third sentence."

    audio_stream = await client.tts.stream_websocket(text_with_flush())

asyncio.run(main())
```
</CodeGroup>

<Note>
See [Text-to-Speech guide](/developer-guide/sdk-guide/python/text-to-speech#understanding-flushevent) for detailed FlushEvent usage and advanced examples.
</Note>

## LLM Integration

WebSocket streaming is designed for integrating with LLM streaming responses. The TTS engine automatically buffers incoming text chunks and generates audio when it has enough context for natural speech:

<CodeGroup>
```python Synchronous focus={5-21}
from fishaudio import FishAudio
from fishaudio.utils import play

client = FishAudio()

# Simulate streaming LLM response
def llm_stream():
    """Simulates text chunks from an LLM."""
    tokens = [
        "The ", "weather ", "today ", "is ", "sunny ",
        "with ", "clear ", "skies. ", "Perfect ",
        "for ", "outdoor ", "activities!"
    ]
    for token in tokens:
        yield token

# Stream to speech in real-time
audio_stream = client.tts.stream_websocket(
    llm_stream(),
    latency="balanced"
)
play(audio_stream)
```

```python Asynchronous focus={7-23}
import asyncio
from fishaudio import AsyncFishAudio
from fishaudio.utils import play

async def main():
    client = AsyncFishAudio()

    # Simulate streaming LLM response
    async def llm_stream():
        """Simulates text chunks from an LLM."""
        tokens = [
            "The ", "weather ", "today ", "is ", "sunny ",
            "with ", "clear ", "skies. ", "Perfect ",
            "for ", "outdoor ", "activities!"
        ]
        for token in tokens:
            yield token

    # Stream to speech in real-time
    audio_stream = await client.tts.stream_websocket(
        llm_stream(),
        latency="balanced"
    )
    play(audio_stream)

asyncio.run(main())
```
</CodeGroup>

<Note>
The WebSocket connection automatically buffers incoming text and generates audio when it has accumulated enough context for natural-sounding speech. You don't need to manually batch tokens unless you want to force generation at specific points using `FlushEvent`.
</Note>

## Next Steps

<CardGroup cols={2}>
<Card title="Text-to-Speech" icon="microphone" href="/developer-guide/sdk-guide/python/text-to-speech">
  Learn about non-streaming TTS options, audio formats, TextEvent vs plain strings, and advanced configuration
</Card>

<Card title="Voice Cloning" icon="clone" href="/developer-guide/sdk-guide/python/voice-cloning">
  Use custom voices in streams and learn about voice selection
</Card>

<Card title="TTS API Reference" icon="book" href="/api-reference/sdk/python/resources#tts">
  Complete streaming API documentation
</Card>

<Card title="Best Practices" icon="lightbulb" href="/developer-guide/best-practices/">
  Production streaming optimization
</Card>
</CardGroup>

## Related Resources

- [WebSocket Types](/api-reference/sdk/python/types#tts) - TextEvent, FlushEvent, and more
- [Utils Reference](/api-reference/sdk/python/utils) - Audio playback utilities
- [Error Handling](/api-reference/sdk/python/exceptions) - WebSocket exception handling
- [Fine-grained Control](/developer-guide/core-features/fine-grained-control) - Advanced speech control
